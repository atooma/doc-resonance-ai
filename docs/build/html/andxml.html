
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.3. Defining Rules With XML &mdash; Resonance AI SDK 2.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.6/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/atooma.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Resonance AI SDK 2.1.0 documentation" href="index.html" />
    <link rel="up" title="3. Resonance Android SDK framework" href="android.html" />
    <link rel="next" title="3.4. Developing Modules" href="andprogramming.html" />
    <link rel="prev" title="3.2. Rules Engine" href="andengine.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Resonance AI SDK</a>
        <span class="navbar-text navbar-version pull-left"><b>2.1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getstart.html">1. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getstart.html#declaring-features-of-interest">1.1. Declaring Features of Interest</a></li>
<li class="toctree-l2"><a class="reference internal" href="getstart.html#data-sources-definition">1.2. Data Sources Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="getstart.html#rule-engine-configuration">1.3. Rule Engine Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="iosstart.html">2. Resonance iOS SDK framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="iosstart.html#add-the-sdk-to-your-xcode-project">2.1. Add the SDK to your Xcode Project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#configure-the-app-capabilities">2.1.1. Configure the app capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#set-the-location-service-permission-string">2.1.2. Set the Location Service permission string</a></li>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#objective-c">2.1.3. Objective-C</a></li>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#all-set">2.1.4. All set!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iosstart.html#data-collector">2.2. Data Collector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#configure-the-collector">2.2.1. Configure the collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#ask-for-permission">2.2.2. Ask for Permission</a></li>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#start-the-collector">2.2.3. Start the collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#stop-the-collector">2.2.4. Stop the collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#logger">2.2.5. Logger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iosstart.html#activity-tracking">2.3. Activity Tracking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#history">2.3.1. History</a></li>
<li class="toctree-l3"><a class="reference internal" href="iosstart.html#realtime-event-monitoring-beta">2.3.2. Realtime Event Monitoring (Beta)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="android.html">3. Resonance Android SDK framework</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="andcore.html">3.1. Core Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="andcore.html#modules">3.1.1. Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="andcore.html#rules">3.1.2. Rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="andcore.html#data-analysis">3.1.3. Data Analysis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="andengine.html">3.2. Rules Engine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="andengine.html#the-ruledefinition-class">3.2.1. The <em>RuleDefinition</em> Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="andengine.html#the-atooma-class">3.2.2. The <em>Atooma</em> Class</a></li>
<li class="toctree-l3"><a class="reference internal" href="andengine.html#the-ruleconflictschecker-class">3.2.3. The <em>RuleConflictsChecker</em> Class</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.3. Defining Rules With XML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#property-values">3.3.1. Property Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-provider-calls">3.3.2. External Provider Calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">3.3.3. Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#atooma-binary-format">3.3.4. Atooma binary format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="andprogramming.html">3.4. Developing Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="andprogramming.html#creating-modules">3.4.1. Creating Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="andprogramming.html#creating-value-types">3.4.2. Creating Value Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="andprogramming.html#creating-triggers">3.4.3. Creating Triggers</a></li>
<li class="toctree-l3"><a class="reference internal" href="andprogramming.html#creating-condition-checkers">3.4.4. Creating Condition Checkers</a></li>
<li class="toctree-l3"><a class="reference internal" href="andprogramming.html#trigger-and-condition-checker-affinity">3.4.5. Trigger and Condition Checker Affinity</a></li>
<li class="toctree-l3"><a class="reference internal" href="andprogramming.html#creating-performers">3.4.6. Creating Performers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="andreference.html">3.5. Modules API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#oauth-based-modules">3.5.1. OAuth Based Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#activity-manager">3.5.2. Activity Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#airplane">3.5.3. Airplane</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#alarm">3.5.4. Alarm</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#battery">3.5.5. Battery</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#bluetooth">3.5.6. Bluetooth</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#camera">3.5.7. Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#contacts">3.5.8. Contacts</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#core">3.5.9. Core</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#data-sync">3.5.10. Data Sync</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#module-dropbox">3.5.11. Dropbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#facebook">3.5.12. Facebook</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#google-calendar">3.5.13. Google Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#google-drive">3.5.14. Google Drive</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#gmail">3.5.15. Gmail</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#headphone">3.5.16. Headphone</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#module-instagram">3.5.17. Instagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#location">3.5.18. Location</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#notification">3.5.19. Notification</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#shake">3.5.20. Shake</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#sms">3.5.21. SMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#telephony">3.5.22. Telephony</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#text-to-speech">3.5.23. Text To Speech</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#module-twitter">3.5.24. Twitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#wifi">3.5.25. WiFi</a></li>
<li class="toctree-l3"><a class="reference internal" href="andreference.html#weather">3.5.26. Weather</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="andactivity.html">3.6. Activity Tracking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="andactivity.html#theoretical-basis">3.6.1. Theoretical Basis</a></li>
<li class="toctree-l3"><a class="reference internal" href="andactivity.html#monitoring-events">3.6.2. Monitoring Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="andactivity.html#accessing-activity-history">3.6.3. Accessing activity history</a></li>
<li class="toctree-l3"><a class="reference internal" href="andactivity.html#sub-activities">3.6.4. Sub Activities</a></li>
<li class="toctree-l3"><a class="reference internal" href="andactivity.html#next-steps">3.6.5. Next Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="andactivity.html#bibliography">3.6.6. Bibliography</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="andresonance.html">3.7. Resonance API Client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="andresonance.html#theoretical-basis">3.7.1. Theoretical Basis</a></li>
<li class="toctree-l3"><a class="reference internal" href="andresonance.html#resonanceapiclient-class">3.7.2. <em>ResonanceApiClient</em> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="andresonance.html#data-collector">3.7.3. Data Collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="andresonance.html#advisor">3.7.4. Advisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="andresonance.html#next-steps">3.7.5. Next Steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="andresonance.html#bibliography">3.7.6. Bibliography</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="andexamples.html">3.8. Building Own Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="andexamples.html#example-0-rule-engine-basics">3.8.1. Example 0 - Rule Engine Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="andexamples.html#example-1-external-providers">3.8.2. Example 1 - External Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="andexamples.html#example-2-custom-modules">3.8.3. Example 2 - Custom Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="andexamples.html#example-3-xml-as-a-template">3.8.4. Example 3 - XML As A Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="andexamples.html#example-4-parking-reminder">3.8.5. Example 4 - Parking Reminder</a></li>
<li class="toctree-l3"><a class="reference internal" href="andexamples.html#example-5-timeline">3.8.6. Example 5 - Timeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="android.html#stable-gradle-configuration">3.9. Stable Gradle Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="android.html#basic-manifest-configuration">3.10. Basic Manifest Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="android.html#changelog">3.11. Changelog</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contextapi.html">4. Context API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contextapi.html#basic-api">4.1. Basic API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contextapi.html#vehicle-api">4.2. Vehicle API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contextapi.html#user-places-api">4.3. User Places API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contextapi.html#on-foot-api">4.4. On Foot API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contextapi.html#entertainment-api">4.5. Entertainment API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contextapi.html#health-api">4.6. Health API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contextapi.html#business-api">4.7. Business API</a></li>
<li class="toctree-l2"><a class="reference internal" href="contextapi.html#holidays-api">4.8. Holidays API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="infoapi.html">5. Info API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="infoapi.html#user-basic-habits">5.1. User Basic Habits</a></li>
<li class="toctree-l2"><a class="reference internal" href="infoapi.html#vehicle">5.2. Vehicle</a></li>
<li class="toctree-l2"><a class="reference internal" href="infoapi.html#suggestions">5.3. Suggestions</a></li>
<li class="toctree-l2"><a class="reference internal" href="infoapi.html#weather">5.4. Weather</a></li>
<li class="toctree-l2"><a class="reference internal" href="infoapi.html#traffic">5.5. Traffic</a></li>
<li class="toctree-l2"><a class="reference internal" href="infoapi.html#fitness">5.6. Fitness</a></li>
<li class="toctree-l2"><a class="reference internal" href="infoapi.html#shopping-habits">5.7. Shopping Habits</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">3.3. Defining Rules With XML</a><ul>
<li><a class="reference internal" href="#property-values">3.3.1. Property Values</a></li>
<li><a class="reference internal" href="#external-provider-calls">3.3.2. External Provider Calls</a></li>
<li><a class="reference internal" href="#example">3.3.3. Example</a></li>
<li><a class="reference internal" href="#atooma-binary-format">3.3.4. Atooma binary format</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="defining-rules-with-xml">
<span id="andxml"></span><h1>3.3. Defining Rules With XML<a class="headerlink" href="#defining-rules-with-xml" title="Permalink to this headline">¶</a></h1>
<p>Dealing with the definition of a rule by using Java classes and objects can be extremely complex. That&#8217;s why, Atooma SDK provides an XML schema, allowing to more easily define rules according to the model described in previous sections.</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;schema</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>
        <span class="na">targetNamespace=</span><span class="s">&quot;http://www.atooma.com/sdk/rule&quot;</span>
        <span class="na">xmlns:tns=</span><span class="s">&quot;http://www.atooma.com/sdk/rule&quot;</span>
        <span class="na">elementFormDefault=</span><span class="s">&quot;qualified&quot;</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- rule title definition --&gt;</span>
  <span class="nt">&lt;simpleType</span> <span class="na">name=</span><span class="s">&quot;rule-title&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;restriction</span> <span class="na">base=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;minLength</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;&lt;/minLength&gt;</span>
      <span class="nt">&lt;maxLength</span> <span class="na">value=</span><span class="s">&quot;50&quot;</span><span class="nt">&gt;&lt;/maxLength&gt;</span>
    <span class="nt">&lt;/restriction&gt;</span>
  <span class="nt">&lt;/simpleType&gt;</span>

  <span class="c">&lt;!-- rule description definition --&gt;</span>
  <span class="nt">&lt;simpleType</span> <span class="na">name=</span><span class="s">&quot;rule-description&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;restriction</span> <span class="na">base=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;minLength</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;&lt;/minLength&gt;</span>
      <span class="nt">&lt;maxLength</span> <span class="na">value=</span><span class="s">&quot;250&quot;</span><span class="nt">&gt;&lt;/maxLength&gt;</span>
    <span class="nt">&lt;/restriction&gt;</span>
  <span class="nt">&lt;/simpleType&gt;</span>

  <span class="c">&lt;!-- definition for literal value to be used in properties --&gt;</span>
  <span class="nt">&lt;simpleType</span> <span class="na">name=</span><span class="s">&quot;literal-type&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;restriction</span> <span class="na">base=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;string&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;number&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;percent&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;timestamp&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;date&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;time&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;duration&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;boolean&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;binary&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;comparator&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/restriction&gt;</span>
  <span class="nt">&lt;/simpleType&gt;</span>

  <span class="c">&lt;!-- definition for required module element --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;required-module&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;version&quot;</span> <span class="na">type=</span><span class="s">&quot;unsignedInt&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- property definition --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;property&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;simpleContent&gt;</span>
      <span class="nt">&lt;extension</span> <span class="na">base=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;typeModule&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;typeId&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;literal&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:literal-type&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/extension&gt;</span>
    <span class="nt">&lt;/simpleContent&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- definition for trigger parameter with allowed sources --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;trigger-parameter&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;choice</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;property-ref&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:property-ref&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;external-provider-call&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:external-provider-call&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/choice&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- definition for condition checker parameter with allowed sources --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;condition-parameter&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;choice</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;property-ref&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:property-ref&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;trigger-variable&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:trigger-variable&quot;</span> <span class="nt">/&gt;</span>
      <span class="c">&lt;!--element name=&quot;provider-call&quot; type=&quot;tns:provider-call&quot; /--&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;external-provider-call&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:external-provider-call&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/choice&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- definition for performer parameter with allowed sources --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;performer-parameter&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;choice</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;property-ref&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:property-ref&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;trigger-variable&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:trigger-variable&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;provider-call&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:provider-call&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;performer-variable&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:performer-variable&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;external-provider-call&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:external-provider-call&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/choice&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- definition for property reference --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;property-ref&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- definition for call to external provider --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;external-provider-call&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;className&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;methodName&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- trigger variable definition --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;trigger-variable&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- performer variable definition --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;performer-variable&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;module&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;performer&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- trigger definition --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;trigger&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;sequence&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;parameter&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:trigger-parameter&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/sequence&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;module&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- condition checker definition --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;condition&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;sequence&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;parameter&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:condition-parameter&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/sequence&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;module&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;inverse&quot;</span> <span class="na">type=</span><span class="s">&quot;boolean&quot;</span> <span class="na">use=</span><span class="s">&quot;optional&quot;</span> <span class="na">default=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- performer definition --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;performer&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;sequence&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;parameter&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:performer-parameter&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/sequence&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;module&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- rule definition --&gt;</span>
  <span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;rule&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;sequence&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:rule-title&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:rule-description&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;required-module&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:required-module&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;property&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:property&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;trigger&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:trigger&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;condition&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:condition&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;4&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;performer&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:performer&quot;</span>
               <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;5&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/sequence&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;version&quot;</span> <span class="na">type=</span><span class="s">&quot;unsignedInt&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/complexType&gt;</span>

  <span class="c">&lt;!-- root element rule --&gt;</span>
  <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;rule&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:rule&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/schema&gt;</span>
</pre></div>
</td></tr></table></div>
<p>As you can see, starting from bottom of the schema, each rule has a structure defined by the following block:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span>...
<span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;rule&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;sequence&gt;</span>
    <span class="c">&lt;!-- mandatory rule title --&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;title&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:rule-title&quot;</span>
             <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- optional rule description --&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:rule-description&quot;</span>
             <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- eventual required modules --&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;required-module&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:required-module&quot;</span>
             <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- eventual properties --&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;property&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:property&quot;</span>
             <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- one and only one trigger --&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;trigger&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:trigger&quot;</span>
             <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- up to 4 condition checkers --&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;condition&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:condition&quot;</span>
             <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;4&quot;</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- up to 5 performers --&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;performer&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:performer&quot;</span>
             <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;5&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/sequence&gt;</span>
  <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;version&quot;</span> <span class="na">type=</span><span class="s">&quot;unsignedInt&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/complexType&gt;</span>
...
</pre></div>
</td></tr></table></div>
<p>Definitions for trigger, condition checker and performer elements are similar. Let&#8217;s consider for example trigger definition:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span>...
<span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;trigger&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- eventual list of parameters --&gt;</span>
  <span class="nt">&lt;sequence&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;parameter&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:trigger-parameter&quot;</span>
             <span class="na">minOccurs=</span><span class="s">&quot;0&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/sequence&gt;</span>
  <span class="c">&lt;!-- belonging module --&gt;</span>
  <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;module&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="c">&lt;!-- trigger identifier --&gt;</span>
  <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/complexType&gt;</span>
...
</pre></div>
</td></tr></table></div>
<p>It&#8217;s easy to notice that this definition perfectly matches with details provided in section <a class="reference internal" href="andcore.html#coretriggerdef"><span class="std std-ref">Trigger Definition</span></a>. In particular, triggers have a list of parameters that can be statically defined within the rule or injected by using an external provider call, as reported in <em>trigger-parameter</em> element definition:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span>...
<span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;trigger-parameter&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;choice</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- parameter can be inner rule property or result of provider call --&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;property-ref&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:property-ref&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;element</span> <span class="na">name=</span><span class="s">&quot;external-provider-call&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:external-provider-call&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/choice&gt;</span>
  <span class="c">&lt;!-- parameter identifier --&gt;</span>
  <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/complexType&gt;</span>
...
</pre></div>
</td></tr></table></div>
<p>Details on properties and external provider calls will be provided in following sections.</p>
<div class="section" id="property-values">
<h2>3.3.1. Property Values<a class="headerlink" href="#property-values" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s consider definition of a simple property, as exposed in previous section:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="highlight"><pre><span></span>...
<span class="c">&lt;!-- property-ref is just the identifier of a property --&gt;</span>
<span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;property-ref&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/complexType&gt;</span>

<span class="c">&lt;!-- property is a complex type --&gt;</span>
<span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;property&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;simpleContent&gt;</span>
    <span class="nt">&lt;extension</span> <span class="na">base=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;typeModule&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;typeId&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;literal&quot;</span> <span class="na">type=</span><span class="s">&quot;tns:literal-type&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/extension&gt;</span>
  <span class="nt">&lt;/simpleContent&gt;</span>
<span class="nt">&lt;/complexType&gt;</span>

<span class="c">&lt;!-- literal finally contains values --&gt;</span>
<span class="nt">&lt;simpleType</span> <span class="na">name=</span><span class="s">&quot;literal-type&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;restriction</span> <span class="na">base=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;string&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;number&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;percent&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;timestamp&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;date&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;time&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;duration&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;boolean&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;binary&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;enumeration</span> <span class="na">value=</span><span class="s">&quot;comparator&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/restriction&gt;</span>
<span class="nt">&lt;/simpleType&gt;</span>
...
</pre></div>
</td></tr></table></div>
<p>As reported in the XML excerpt above, values assigned to rule properties can be represented in different formats, defined through the <code class="docutils literal"><span class="pre">literal</span></code> attribute of <code class="docutils literal"><span class="pre">property</span></code> tag. A detailed description for all available literal formats is reported below:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">binary</span></code> - Binary sequence represented as a <em>Base64</em> string. Property value type class will be used for decoding the binary sequence, according to its own model.</li>
<li><code class="docutils literal"><span class="pre">string</span></code> - A simple string.</li>
<li><code class="docutils literal"><span class="pre">number</span></code> - String to be interpreted as a number, either integer or decimal. <em>Dot</em> character is used as a separator between integer and decimal parts. It&#8217;s also possible to represent negative numbers by using <em>minus</em> character as a prefix for the value.</li>
<li><code class="docutils literal"><span class="pre">percent</span></code> - String to be interpreted as an unsigned integer number, with value between <em>0</em> e <em>100</em> (included).</li>
<li><code class="docutils literal"><span class="pre">boolean</span></code> - <code class="docutils literal"><span class="pre">true</span></code> or <code class="docutils literal"><span class="pre">false</span></code>.</li>
<li><code class="docutils literal"><span class="pre">timestamp</span></code> - String representing a timestamp with format <code class="docutils literal"><span class="pre">yyyy/mm/dd</span> <span class="pre">hh:mm[:ss[.mmm]]</span></code>. Hour value is between  <em>0</em> and <em>23</em>. Seconds and milliseconds are optional. In case milliseconds are specified, seconds must be reported too.</li>
<li><code class="docutils literal"><span class="pre">date</span></code> - String representing a date with format <code class="docutils literal"><span class="pre">yyyy/mm/dd</span></code>.</li>
<li><code class="docutils literal"><span class="pre">time</span></code> - String representing a timestamp with format <code class="docutils literal"><span class="pre">hh:mm[:ss[.mmm]]</span></code>. Hour value is between  <em>0</em> and <em>23</em>. Seconds and milliseconds are optional. In case milliseconds are specified, seconds must be reported too.</li>
<li><code class="docutils literal"><span class="pre">duration</span></code> - String to be interpreted as an unsigned integer number, representing a duration in seconds.</li>
<li><code class="docutils literal"><span class="pre">comparator</span></code> - Uppercase string, representing a number comparator. Possible values are: <code class="docutils literal"><span class="pre">LESS</span></code>, <code class="docutils literal"><span class="pre">LESS_EQUAL</span></code>, <code class="docutils literal"><span class="pre">EQUAL</span></code>, <code class="docutils literal"><span class="pre">GREATER_EQUAL</span></code> e <code class="docutils literal"><span class="pre">GREATER</span></code>.</li>
</ul>
</div>
<div class="section" id="external-provider-calls">
<h2>3.3.2. External Provider Calls<a class="headerlink" href="#external-provider-calls" title="Permalink to this headline">¶</a></h2>
<p>Working with rules commonly requires parameters to be dynamically configured. Let&#8217;s think for example about rules requesting home location. Of course, home location differs from user to user, so we cannot statically include such data within the rule definition.</p>
<p>For such kind of scenarios, it would be extremely useful to rely on functions allowing to provide different data depending on device, user and context. This is exactly what external provider calls allow to do.</p>
<p>Below is reported the definition of and external provider call within the XML schema:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">&lt;!-- definition for call to external provider --&gt;</span>
<span class="nt">&lt;complexType</span> <span class="na">name=</span><span class="s">&quot;external-provider-call&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;className&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;methodName&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">use=</span><span class="s">&quot;required&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/complexType&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Exploiting a call to an external provider just requires to define a generic class (no specific extension is required) implementing a static method without parameters, as reported in following example:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>...
<span class="nt">&lt;trigger</span> <span class="na">id=</span><span class="s">&quot;CONNECTED&quot;</span> <span class="na">module=</span><span class="s">&quot;WIFI&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;parameter</span> <span class="na">id=</span><span class="s">&quot;SSID&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;external-provider-call</span>
      <span class="na">className=</span><span class="s">&quot;com.atooma.sample.HomeLocationProvider&quot;</span>
      <span class="na">methodName=</span><span class="s">&quot;getHome&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/parameter&gt;</span>
<span class="nt">&lt;/trigger&gt;</span>
...
</pre></div>
</td></tr></table></div>
<p>Please notice that <code class="docutils literal"><span class="pre">className</span></code> attribute must include also class package, so be aware in case you perform changes on packages organization.</p>
<p>It follows a possible implementation for <code class="docutils literal"><span class="pre">HomeLocationProvider</span></code> class:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeLocationProvider</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">VT_Location_Wrapper</span> <span class="nf">getHome</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// custom logic for retrieving home location</span>
    <span class="n">LocationWrapper</span> <span class="n">home</span> <span class="o">=</span> <span class="n">getHomeLocation</span><span class="o">();</span>
    <span class="c1">// returning location wrapper for home</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">VT_Location_Wrapper</span><span class="o">(</span><span class="n">home</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="o">...</span>

<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Class <code class="docutils literal"><span class="pre">VT_Location_Wrapper</span></code> is a wrapper class used for encapsulating <code class="docutils literal"><span class="pre">Area</span></code> value type into a convenient common format. It follows a sample definition:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VT_Area_Wrapper</span> <span class="kd">implements</span> <span class="n">ValueTypeWrapper</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">VT_MODULE</span> <span class="o">=</span> <span class="s">&quot;LOCATION&quot;</span><span class="o">;</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">VT_ID</span> <span class="o">=</span> <span class="s">&quot;AREA&quot;</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">LocationWrapper</span> <span class="n">value</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">VT_Area_Wrapper</span><span class="o">(</span><span class="n">LocationWrapper</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="nf">getValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">buildArea</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="n">Area</span> <span class="nf">buildArea</span><span class="o">(</span><span class="n">LocationWrapper</span> <span class="n">wrapper</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Position</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Position</span><span class="o">(</span><span class="n">wrapper</span><span class="o">.</span><span class="na">getLatitude</span><span class="o">(),</span>
        <span class="n">wrapper</span><span class="o">.</span><span class="na">getLongitude</span><span class="o">(),</span> <span class="n">wrapper</span><span class="o">.</span><span class="na">getAddress</span><span class="o">());</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">CellPosition</span><span class="o">&gt;</span> <span class="n">cells</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">CellPosition</span><span class="o">&gt;();</span>
    <span class="c1">// building cell position</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">LocationCell</span> <span class="n">location</span> <span class="o">:</span> <span class="n">wrapper</span><span class="o">.</span><span class="na">getCells</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">CellPosition</span> <span class="n">cell</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CellPosition</span><span class="o">();</span>
      <span class="n">cell</span><span class="o">.</span><span class="na">setCid</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">getCid</span><span class="o">());</span>
      <span class="n">cell</span><span class="o">.</span><span class="na">setLac</span><span class="o">(</span><span class="n">location</span><span class="o">.</span><span class="na">getLac</span><span class="o">());</span>
      <span class="n">cells</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">Area</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="mi">500</span><span class="o">,</span> <span class="n">cells</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>All wrapper classes must implement the interface <code class="docutils literal"><span class="pre">ValueTypeWrapper</span></code> and accordingly define method <code class="docutils literal"><span class="pre">getValue</span></code>, returning value type that this wrapper belongs to. Moreover, all classes implementing <code class="docutils literal"><span class="pre">ValueTypeWrapper</span></code> must include a couple of static parameters:</p>
<ul class="simple">
<li><strong>VT_MODULE</strong> - The identifier of the module that this wrapper belongs to.</li>
<li><strong>VT_ID</strong> - The identifier of the value type that this wrapper belongs to.</li>
</ul>
<p>Please notice that currently Atooma SDK defines Value Type Wrapper class for all value types defined within basic modules.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In many cases, dealing with complex value types directly within XML definition could be difficult. That&#8217;s because developer has to provide a binary value encoded in Base64 format, according to serialization / deserialization strategy defined by the value type itself. Below is reported a simple example.</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">&lt;property</span> <span class="na">id=</span><span class="s">&quot;par-0&quot;</span> <span class="na">literal=</span><span class="s">&quot;binary&quot;</span>
  <span class="na">typeId=</span><span class="s">&quot;NUMBER-FILTER&quot;</span> <span class="na">typeModule=</span><span class="s">&quot;CORE&quot;</span><span class="nt">&gt;</span>
    A0A0AAAAAAAA
<span class="nt">&lt;/property&gt;</span>
...
<span class="nt">&lt;parameter</span> <span class="na">id=</span><span class="s">&quot;FILTER&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property-ref</span> <span class="na">id=</span><span class="s">&quot;par-0&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/parameter&gt;</span>
</pre></div>
</td></tr></table></div>
<p>Using external providers and wrapper classes can simplify this activity by moving definition of parameter values into java code.</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nt">&lt;parameter</span> <span class="na">id=</span><span class="s">&quot;FILTER&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;external-provider-call</span>
    <span class="na">className=</span><span class="s">&quot;com.atooma.sdk.samples.providers.MyRuleProvider&quot;</span>
    <span class="na">methodName=</span><span class="s">&quot;getMyTextFilter&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/parameter&gt;</span>
</pre></div>
</td></tr></table></div>
<div class="last highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyRuleProvider</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">VT_TextFilter_Wrapper</span> <span class="nf">getMyTextFilter</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">NumberFilter</span> <span class="n">filter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NumberFilter</span><span class="o">(</span><span class="n">NumberFilter</span><span class="o">.</span><span class="na">GREATER</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">VT_TextFilter_Wrapper</span><span class="o">(</span><span class="n">filter</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="example">
<h2>3.3.3. Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>Following example describe how an if-do rule expressed in natural language can be represented by using the model and XML format described in previous sections.</p>
<p>Please notice that names of modules, value types, triggers, condition checkers and performers are from fantasy. Defining them is not a target of this section.</p>
<ul class="simple">
<li><strong>Natural form</strong> - <em>When receiving an SMS while driving, read it</em></li>
<li><strong>Normalized form</strong> - <em>If an SMS is received and my speed is greater than 20km/h, read sender name and message content</em></li>
</ul>
<p>Below is reported the rule definition in XML format:</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span>
<span class="nt">&lt;rule</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.yourule.it/simple/rule-definition&quot;</span>
      <span class="na">id=</span><span class="s">&quot;b7b7c82b-6ecc-452f-b786-2ec82d88b046&quot;</span>
              <span class="na">version=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- title --&gt;</span>
  <span class="nt">&lt;title&gt;</span>Read SMS while driving<span class="nt">&lt;/title&gt;</span>
  <span class="c">&lt;!-- empty description --&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="c">&lt;!-- declaring required modules --&gt;</span>
  <span class="nt">&lt;required-module</span> <span class="na">version=</span><span class="s">&quot;1&quot;</span> <span class="na">id=</span><span class="s">&quot;CORE&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;required-module</span> <span class="na">version=</span><span class="s">&quot;1&quot;</span> <span class="na">id=</span><span class="s">&quot;SMS&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;required-module</span> <span class="na">version=</span><span class="s">&quot;1&quot;</span> <span class="na">id=</span><span class="s">&quot;CONTACTS&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;required-module</span> <span class="na">version=</span><span class="s">&quot;1&quot;</span> <span class="na">id=</span><span class="s">&quot;GPS&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;required-module</span> <span class="na">version=</span><span class="s">&quot;1&quot;</span> <span class="na">id=</span><span class="s">&quot;TEXT-TO-SPEECH&quot;</span> <span class="nt">/&gt;</span>
  <span class="c">&lt;!-- static properties available within the rule --&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">id=</span><span class="s">&quot;par-0&quot;</span> <span class="na">literal=</span><span class="s">&quot;binary&quot;</span>
    <span class="na">typeId=</span><span class="s">&quot;NUMBER-FILTER&quot;</span> <span class="na">typeModule=</span><span class="s">&quot;CORE&quot;</span><span class="nt">&gt;</span>
      A0A0AAAAAAAA
  <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">id=</span><span class="s">&quot;par-1&quot;</span> <span class="na">literal=</span><span class="s">&quot;string&quot;</span>
    <span class="na">typeId=</span><span class="s">&quot;STRING&quot;</span> <span class="na">typeModule=</span><span class="s">&quot;CORE&quot;</span><span class="nt">&gt;</span>
      incoming message
  <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">id=</span><span class="s">&quot;par-2&quot;</span> <span class="na">literal=</span><span class="s">&quot;string&quot;</span>
    <span class="na">typeId=</span><span class="s">&quot;STRING&quot;</span> <span class="na">typeModule=</span><span class="s">&quot;CORE&quot;</span><span class="nt">&gt;</span>
      message content from
  <span class="nt">&lt;/property&gt;</span>
  <span class="c">&lt;!-- trigger definition on incoming sms --&gt;</span>
  <span class="nt">&lt;trigger</span> <span class="na">id=</span><span class="s">&quot;INCOMING&quot;</span> <span class="na">module=</span><span class="s">&quot;SMS&quot;</span> <span class="nt">/&gt;</span>
  <span class="c">&lt;!-- condition checker definition on speed --&gt;</span>
  <span class="nt">&lt;condition</span> <span class="na">inverse=</span><span class="s">&quot;false&quot;</span> <span class="na">id=</span><span class="s">&quot;SPEED&quot;</span> <span class="na">module=</span><span class="s">&quot;GPS&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;parameter</span> <span class="na">id=</span><span class="s">&quot;FILTER&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- value for speed filter is taken from property --&gt;</span>
      <span class="c">&lt;!-- ref par-0, that is binary because number filter --&gt;</span>
      <span class="c">&lt;!-- is a custom value type --&gt;</span>
      <span class="nt">&lt;property-ref</span> <span class="na">id=</span><span class="s">&quot;par-0&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/parameter&gt;</span>
  <span class="nt">&lt;/condition&gt;</span>
  <span class="c">&lt;!-- performer definitions --&gt;</span>
  <span class="nt">&lt;performer</span> <span class="na">id=</span><span class="s">&quot;SPEAK&quot;</span> <span class="na">module=</span><span class="s">&quot;TEXT-TO-SPEECH&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;parameter</span> <span class="na">id=</span><span class="s">&quot;TEXT&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- message taken from property reference --&gt;</span>
      <span class="nt">&lt;property-ref</span> <span class="na">id=</span><span class="s">&quot;par-1&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/parameter&gt;</span>
  <span class="nt">&lt;/performer&gt;</span>
  <span class="nt">&lt;performer</span> <span class="na">id=</span><span class="s">&quot;SPEAK&quot;</span> <span class="na">module=</span><span class="s">&quot;TEXT-TO-SPEECH&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;parameter</span> <span class="na">id=</span><span class="s">&quot;TEXT&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- message injected from trigger --&gt;</span>
      <span class="nt">&lt;trigger-variable</span> <span class="na">id=</span><span class="s">&quot;SENDER-NAME&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/parameter&gt;</span>
  <span class="nt">&lt;/performer&gt;</span>
  <span class="nt">&lt;performer</span> <span class="na">id=</span><span class="s">&quot;SPEAK&quot;</span> <span class="na">module=</span><span class="s">&quot;TEXT-TO-SPEECH&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;parameter</span> <span class="na">id=</span><span class="s">&quot;TEXT&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- message taken from property reference --&gt;</span>
      <span class="nt">&lt;property-ref</span> <span class="na">id=</span><span class="s">&quot;par-2&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/parameter&gt;</span>
  <span class="nt">&lt;/performer&gt;</span>
  <span class="nt">&lt;performer</span> <span class="na">id=</span><span class="s">&quot;SPEAK&quot;</span> <span class="na">module=</span><span class="s">&quot;TEXT-TO-SPEECH&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;parameter</span> <span class="na">id=</span><span class="s">&quot;TEXT&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- message injected from trigger --&gt;</span>
      <span class="nt">&lt;trigger-variable</span> <span class="na">id=</span><span class="s">&quot;TEXT&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/parameter&gt;</span>
  <span class="nt">&lt;/performer&gt;</span>
<span class="nt">&lt;/rule&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="atooma-binary-format">
<span id="srd"></span><h2>3.3.4. Atooma binary format<a class="headerlink" href="#atooma-binary-format" title="Permalink to this headline">¶</a></h2>
<p>The Atooma binary format (SRD, <em>Serialized Rule Definition</em>) is an encoding used for representing a rule definition through a compact byte sequence. Even if rules in such format are not human readable, their parsing is much more efficient and memory required is minimized.</p>
<p>Having a clear understanding of how binary format works is extremely important because the definition of new value types requires the implementation of proper methods for encoding / decoding data to / from their SRD representation.</p>
<p>For such purpose, it follows a brief description of the binary representation for the primitive data types.</p>
<ul class="simple">
<li><strong>Integer</strong> - Integers are represented with 4 bytes in Big Endian mode (network order).</li>
<li><strong>Binary sequence</strong> - Binary sequences are represented as follows:<ul>
<li>An integer indicating the length of the sequence. In case value is negative, sequence is null. In case value is zero, sequence is empty. In case value is positive, sequence is populated.</li>
<li>In case sequence is populated, a number of bytes described by the length value.</li>
</ul>
</li>
<li><strong>String</strong> - Strings are represented as binary sequences, encoding characters according to UTF-8 charset.</li>
<li><strong>Boolean</strong> - Booleans are represented with a single byte. <code class="docutils literal"><span class="pre">0x0</span></code> is used for representing <code class="docutils literal"><span class="pre">FALSE</span></code>, while <code class="docutils literal"><span class="pre">0x1</span></code> is used for representing <code class="docutils literal"><span class="pre">TRUE</span></code>.</li>
<li><strong>Number</strong> - Numbers are decimal values. Their binary representation is aligned with IEEE P754 with double precision (8 bytes).</li>
<li><strong>Timestamp</strong> - Timestamp values (date and time, with mills precision) are represented with UNIX Time format (number of mills elapsed in UTC from midnight of January 1, 1970). Such value is encoded using a 64 bit integer, represented with 8 bytes in Big Endian mode (network order).</li>
<li><strong>Date</strong> - Dates are represented by saving the number of days (positive or negative) from January 1, 1970. Such value is encoded using a 32 bit integer, represented with 4 bytes in Big Endian mode (network order).</li>
<li><strong>Time</strong> - Times are represented by saving the number of mills from the midnight of the previous day (0 time). Such value (always positive) is encoded using a 32 bit integer, represented with 4 bytes in Big Endian mode (network order).</li>
</ul>
<p>When defining new value types, serialization / deserialization logic must be defined for allowing Atooma to handle properties in SRD format. Please notice that binary format is also essential for defining properties in the XML definition of a rule.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/andxml.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2016, Atooma Inc.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>